---
title: 比特币随想 - 再看工作量证明
tags: Bitcoin
categories: Bitcoin
date: 2022-09-24
---

2022 年 9 月，以太坊完成“融合”，共识算法顺利迁移权益证明（Proof of Stake，POS）。从这一时刻开始，比特币成为唯一有影响力的工作量证明（Proof of Work，POW）公链。

在这个特殊的节点上，我决定再看工作量证明。附之前的几个文章：

- [ 比特币随想 - 重拾 Proof of Work ](https://wangzhe3224.github.io/2022/06/04/thinking_bitcoin_7/)
- [ 比特币随想 - Proof of What? ](https://wangzhe3224.github.io/2022/05/26/thinking_bitcoin_3/)
- [ 比特币随想 - 比特币工作量证明用了多少电？ ](https://wangzhe3224.github.io/2022/08/28/thinking_bitcoin_15/)

## 写在最前面

POW 或者 POS 都是共识实现的工程选择，工程选择问题一定会有取舍，所以并没有明确的好坏之分。

但是，由于工程性质不同，会让比特币和以太坊成为两个截然不同的平台。重申，本文不会比较比特币与以太坊谁好谁坏。

当然，对我而言，比特币最大的创新点就在于工作量证明。**不是比特币定义了工作量证明，而是工作量证明定义了比特币**。

## POW，POS 和环境友好

在《Economic in One Lesson by Henry Hazlitt》这本书中，作者这样总结到：

> 经济学的艺术在于两个方面：
> 1. 对于一个政策不仅仅考虑短期效应，还需要考虑中期、长期影响。
> 2. 对于一个政策不仅仅考虑对某个人群的影响，还需要考虑对不同人群的影响。
> 
> Henry Hazlitt @ 1946 年

作者之后用 20 多个例子说明上述两个要点，以及历史上人们在经济学政策方面，因为忽略其中的一点或者两点而犯下的错误。有意思的是，作者也指出，有时候人们犯错误并不是没有意识到正在犯错误，而是为了利益或者便利有意为之。

有了以上的背景，我们来看一下以太坊融合后的官宣：[POS 会降低以太坊 99% 的能源消耗](https://blog.ethereum.org/2021/05/18/country-power-no-more)。

我觉得这刚好违背了 Hazlitt 提出的两个要点：仅仅考虑了短期利益，特别是仅仅考虑了一小部分人的影响。

【观点】[不可能在不消耗外部能量的前提下达到共识](https://download.wpsoftware.net/bitcoin/pos.pdf)

如果我们承认上述观点，那么，如果说 POS 跟 POW 实现了同样的安全模型，那么 POS 的能量耗散在哪里？

这里有两种可能：

1. POS 不能形成跟 POW 一样的安全模型，POS 是另一种的模型
2. POS 可以形成类似的安全模型，那么其能量耗散应该跟 POW 一致

### 可能 1：POS 不能形成跟 POW 一样的安全模型

如果这个假设成立，那么 POW 跟 POS 基本不存在可比性了，因为他们想要实现不同的安全模型。[关于这点这篇论文进行了详细的论述](https://download.wpsoftware.net/bitcoin/pos.pdf)。这论文的主要论证观点：

> 如果人们可以轻易修改历史，那么这个共识系统已经坏掉了。因为如果一方或者多方可以轻易的修改历史，那么他们就可以创造足够多的历史，然后选择对自己有利的一个。

虽然分布式共识问题是一个非常困难的问题，但是共识问题却不是。共识问题可以轻易地解决，而且可以比分布式系统效率高上十万倍的解决，那就是通过信任的第三方签名。因此，任何加入第三方验证的“分布式”系统，哪怕是一点点第三方的加入，所形成的安全模型都可以被其他模型轻松取代，比如现有的银行体系。**换句话说，分布式只有是和不是两个模型，没有中间模型。**

### 可能 2：POS 可以能形成跟 POW 一样的安全模型

我个人倾向不相信这个假设。但是即使这个假设成立，那就意味着 POS 模型不能是“节约能源”的系统。

那么，按照这个思路，能源耗散在哪里了呢？

POW 模型下，能源耗散非常明确：哈希率消耗的电能。POS 似乎把能源耗散抹除了。这不科学，难道是免费的午餐吗？

不，我们只看到了矿工的消失，取而代之的是验证节点昂贵的服务器，但是他们消耗的电能几乎可以忽略。

为了理解这个问题，我举一个极端一点的例子：我们现在的记账系统 - 银行。银行没有矿工挖矿，但是银行记账的成本是 0 吗？不是。银行需要购置办公楼、办公设备、需要支付人员工资、开设门店等等。银行的碳排放是 0 吗？宅一看，是，但是按照我们之前提到的经济学原则，我们需要看的更远一些：

银行的员工收到额外的工资（如果他没有这份工作就没有这部分工资）购买了一部汽油跑车。

我想说的是，不消耗电能，不代表没有能量消耗，不代表没有碳排放。

**免费午餐的模型，注定是错的**。

POS 需要更加专业的矿池，后面我会讲 POW 矿池和 POS 矿池的本质区别，这些矿池需要更多人工维护，其实这些矿池本传统的银行没有太多区别。

![](https://i.imgur.com/H5XYDSO.png)

### 无论哪种假设

POW 就像工业革命时代通过重复的机器代替人的重复劳动一样，用重复的哈希算法完成了记账的工作，把人从无聊的记账工作中解放出来。

## POW 挖矿 和 POS 验证的区别

无论 POW 挖矿，还是 POS 验证，都是一种决定出块的机制，换句话说，决定谁来提出下一个区块的内容。POW 的世界里，出块通常是“矿池”完成的；POS 的世界里，是验证节点。

POW 矿池多数是自发形成的松散组织，矿机匿名加入某个矿池，可以随意离开，矿机持有自己的私钥，持有自己的设备，可以自己选择任何合理的能源（这一点我们下一节展开）。

POS 矿池是公司运行托管模式，因为一个验证节点至少需要持有 32 个以太坊，节点服务器需要满足一定的硬件要求。散户与公司签订协议，通过质押自己的以太坊加入矿池。

这种区别导致：

- POW 矿池的实际节点分布更加广泛，矿机配置相对动态，更加自由
- POS 矿池的实际节点分布更加集中，质押配置相对静态，更加约束

## POW 鼓励能源创新

刚才提到，无法实现 0 能耗记账功能。POS 和 POW 的能耗体现形式不同而已。

由于 POW 的机制，矿工会尽可能寻找廉价能源，甚至清洁能源，因为只有这样才有更大的经济动力，这也是为什么 POW 矿池运行在各种奇怪的能源供给上：风能、潮汐、地热等等。美国德州的矿工甚至于电网合作，因为电能一旦被生产很难存储，如果没有使用，就只能浪费掉，这些矿工使用这些无用的电能。一些油漆开采公司通常会持续燃烧弃用的天然气，这些能源也被用来 POW。

相对来说，POS 没有类似的经济学动力。POS 的能耗依然倾向于购买电能外的其他服务。

![](https://i.imgur.com/H5XYDSO.png)

## Refs

- [Bitcoin Embodies Nikola Tesla's Vision For Peace And Energy Abundance](https://bitcoinmagazine.com/culture/bitcoin-and-teslas-peaceful-energy-vision)
- [The Environmental Myth Of Proof Of Stake](https://bitcoinmagazine.com/culture/bitcoin-not-proof-of-stake-solves-energy)
- [An interview with Nikola Tesla by John B.  Kennedy](http://www.tfcbooks.com/tesla/1926-01-30.htm)
- [Nothing is Cheaper than Proof of Work](https://www.truthcoin.info/blog/pow-cheapest/)
- [On Stake and Consensus - paper 2015](https://download.wpsoftware.net/bitcoin/pos.pdf)
- [ASICs and Decentralization FAQ](https://download.wpsoftware.net/bitcoin/asic-faq.pdf)